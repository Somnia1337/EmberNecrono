用到的 Debug 程序命令：

| 命令  | 功能                |
| --- | ----------------- |
| r   | 查看、修改寄存器的值        |
| d   | 查看内存的值            |
| e   | 修改内存的值            |
| u   | 将内存中的机器指令翻译为汇编指令  |
| t   | 执行一条机器指令          |
| a   | 以汇编指令的格式将机器指令写入内存 |

#### 启动 Debug

下载 `debug.exe` 放在 `C:\`，以挂载方式启动：

![[Snipaste_240310_163057.png|500]]

#### R 命令：查看、修改寄存器的值

查看：

```txt
-r
```

![[Snipaste_240310_163407.png|500]]

修改 AX，然后查看修改结果：

```text
-r ax
AX 0000 # 显示当前值
:1111   # 用 `:` 提示输入新值, 此处输入 1111
-r
```

![[Snipaste_240310_163634.png|500]]

修改 CS 和 IP，然后查看修改结果：

```text
-r cs
CS 073F
:ff00
-r ip
IP 0100
:200
-r
```

![[Snipaste_240310_163826.png|500]]

#### D 命令：查看内存的值

用 `-d 段地址:偏移地址` 列出从指定的内存单元开始的 128 个单元的内容：

```text
-d 1000:0
```

![[Snipaste_240310_164730.png|500]]

列出 Debug 预设地址处的内容：

```text
-d
```

![[Snipaste_240310_164946.png|500]]

用 `-d 段地址:起始偏移地址 结尾偏移地址` 指定结尾地址：

```text
-d 1000:0 9
```

![[Snipaste_240310_165141.png|500]]

#### E 命令：修改内存的值

修改从 `1000:0` 开始的 10 个单元的值，然后查看修改结果：

```text
-e 1000:0 0 1 2 3 4 5 6 7 8 9
-d 1000:0 9
```

![[Snipaste_240310_165622.png|500]]

#### A 命令：以汇编指令的格式将机器指令写入内存

从指定的地址开始写入汇编指令：

```text
-a 1000:0
```

![[Snipaste_240310_182823.png|500]]

#### T 命令：执行一条机器指令

首先用 E 命令修改 CS、IP 指向目标代码段的首部：

```text
-r cs
CS FF00
:1000
-r ip
IP 0200
:0
```

![[Snipaste_240310_183107.png|500]]

然后，用 T 命令逐句执行，每次执行后 Debug 将自动打印寄存器信息：

```text
-t # 执行多次
```

![[Snipaste_240310_183310.png|500]]

#### U 命令：将内存中的机器指令翻译为汇编指令

将从指定的地址开始的内存单元中的机器指令翻译为汇编指令：

```text
-u 1000:0
```

![[Snipaste_240310_183539.png|500]]

前 6 句正是刚才用 A 命令写入的汇编指令。

#### 任务

1. 

用 A 命令写入：

![[Snipaste_240310_184300.png|500]]

用 R 命令修改 CS、IP：

![[Snipaste_240310_184424.png|500]]

用 T 命令执行：

![[Snipaste_240310_184521.png|500]]

2. 

用 A 命令写入：

![[Snipaste_240310_184655.png|500]]

用 R 命令修改 CS、IP：

![[Snipaste_240310_184731.png|500]]

用 T 命令执行：

![[Snipaste_240310_184904.png|500]]

3. 

![[Snipaste_240310_185111.png|500]]

@1992.01.01

尝试修改为 @2024.03.10 并查看结果：

![[Snipaste_240310_185419.png|500]]

修改失败，因为这是 ROM 的内容，只能读取。

4. 

![[Snipaste_240310_185622.png|500]]

修改失败，因为这也是 ROM 的内容。