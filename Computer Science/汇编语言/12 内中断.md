👈 [[11 标志寄存器]]

### 内中断的产生

中断类型码为字节型，可以表示 $256$ 种中断源。

CPU 内部导致中断的情况：

- `0`：除法错误（如溢出）
- `1`：单步执行
- `4`：执行 `into`
- `n`：执行 `int n`

### 中断处理程序

对中断的处理方式由程序员编程决定。

### 中断向量表

中断向量是中断处理程序的入口地址，中断向量表就是中断处理程序入口地址的列表。

内存中 `0000:0000` ~ `0000:03FF` 的 $1024$ 个单元中存放着中断向量表。

每个表项占 $2$ 字，高、低地址字分别存放段地址、偏移地址。

### 中断过程

1. 取中断类型码 `N`。
2. `pushf` 保存标志寄存器。
3. 设置 TF = `0`，IF = `0`。
4. `push cs` 保存 CS。
5. `push ip` 保存 IP。
6. 设置 CS:IP = `4N:(4N+2)`，使其指向中断处理程序的入口地址。

### 中断处理程序和 `iret` 指令

CPU 随时都可能执行中断处理程序，因此其必须一直存储在内存的某段空间中。

中断处理程序用 `iret` 返回，它相当于：

```asmatmel
pop IP
pop CS
popf
```

### 12.6 ~ 12.12 🚫

👉 