# Introduction

### 企业计算的演变

1. 集中式系统时代（1960年代-70年代）
    - 使用大型主机，所有应用程序在主机上运行。
    - 用户通过终端访问。
    - 引入了虚拟化概念：分区、虚拟机和管理程序。

2. 分布式系统时代（1980年代-90年代）
    - 小型且便宜的微型计算机出现。
    - 客户端-服务器模型，局域网（LAN）连接PC和工作站，形成分布式系统的骨干。
    - 服务器市场诞生。

3. 互联网时代（1990年代-2000年代）
    - 计算广泛分布，互联网无处不在。
    - Web应用和服务盛行，各大公司都有互联网/内联网基础设施。

4. 整合时代（2000年代）
    - 地理分散的系统增加管理成本和复杂性。
    - 通过集中化减少硬件、软件许可、电力、制冷和管理成本。

5. 云时代（当前）
    - IT组织的新商业模式，通过订阅或按需付费模式消费资源。
    - 将资本支出转换为运营支出。

### 虚拟化

- 定义：通过抽象资源，使资源用户看不到其物理特性和边界。
- 技术：
    - 资源虚拟化：包括CPU、内存、存储和网络。
    - 平台虚拟化：分离操作系统与底层平台资源。

### 虚拟化技术

1. 资源虚拟化
    - CPU：多核和多线程技术提高性能。
    - 内存：虚拟内存通过需求分页实现。
    - 存储：提供逻辑存储与物理存储的完全抽象。
    - 网络：应用抽象层以提供更好的服务、可用性和安全性。

2. 平台虚拟化
    - 集群：多个计算机协同工作形成单一系统，分为高性能集群（HPC）、高可用性集群（HAC）和负载均衡集群（LBC）。
    - 网格计算：将服务器、存储和网络资源整合为单一大系统，实现高效、最佳利用。

# Architecture

### 抽象层次

- 功能与实现分离：功能定义做什么，实施决定如何做。
- 分层方法：自上而下或自下而上；功能被分解成多个层次；每层之间有明确的接口。
- 简化构造：抽象层次适用于硬件和软件。

### 虚拟机

- 系统虚拟机：虚拟化ISA，可以与主机ISA不同。
- 架构：堆叠层次，包含硬件、虚拟机监控器（VMM）、虚拟机、客户操作系统（OS）、宿主OS。

### 全虚拟化

- 定义：也称为本地虚拟化或硬件级虚拟化，虚拟化层导出与物理机相同的虚拟机抽象。
- 特点：整个系统被仿真，支持未修改的客户OS；但是在I/O密集型应用上有更高的开销。
- 实例：VMware ESX/ESXi，Microsoft Hyper-V，Xen，Linux KVM。

### 半虚拟化

- 定义：提供一个类似但不完全相同于底层硬件的软件接口。
- 特点：客户特权指令被静态替换或捕获，虚拟机监控器提供虚拟机调用；需要专门的客户OS。
- 实例：Xen，IBM Micro-partitions，Oracle VM Server for SPARC，Microsoft Hyper-V。

### 硬件分区

- 定义：在单个服务器上创建多个隔离的分区，每个分区分配独立的处理器、内存和I/O通道。
- 特点：分区在硬件层面隔离，动态分区可以在系统运行时更改配置。
- 实例：IBM Logical Partitions（LPAR/DLPAR），Oracle Dynamic System Domains（DSD），HP nPartitions（nPar）。

### 分类

- CPU使用：专用CPU和共享CPU。
- 虚拟化层位置：Type 1（本地或裸金属）和Type 2（运行在宿主OS上）。
- 架构分类：硬件分区、全虚拟化、半虚拟化、仿真、OS级虚拟化。