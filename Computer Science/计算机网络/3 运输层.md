👈 [[2 应用层]]

## 概述和运输层服务

运输层协议为不同端系统的应用进程提供 **逻辑通信**。

### 运输层和网络层的关系

运输层在网络层上，前者提供进程之间的逻辑通信，后者提供端系统之间的逻辑通信。

类比：两个家庭，各有若干人员以及一个负责管理邮件的人 Amy 和 Bob，则——

- 运输层协议：Amy 和 Bob
- 网络层协议：邮政服务

运输层协议能提供的服务受制于网络层协议的服务模型。

### 因特网运输层概述

网络层的 **网际协议**(IP) 提供 **尽力而为交付服务**，无法保证完整性或顺序，属于 **不可靠服务**。

UDP 也属于不可靠服务，而 TCP 额外提供了可靠数据传输和拥塞控制。

## 多路复用与多路分解

TCP 和 UDP 负责将端系统间 IP 的交付服务扩展到进程间的交付服务，称该过程为多路复用和多路分解。

每个进程有若干套接字，在源端系统，运输层从各个套接字收集数据、封装上首部信息生成报文段，并将报文段传递到网络中，称此过程为 **多路复用**(multiplexing)。

在目的端系统，运输层从网络层接收报文段，并将其中的数据交付给对应的套接字，称此过程为 **多路分解**(demultiplexing)。

继用前文的类比：

- 多路复用：Amy 收集邮件并交给邮递员
- 多路分解：Bob 拿到邮件并分发给收信人

每个报文段有 **源端口号** 字段和 **目的端口号** 字段。

`0` ~ `1023` 范围的端口号为 **周知端口号**，保留给诸如 HTTP 之类的周知应用层协议。

👉 