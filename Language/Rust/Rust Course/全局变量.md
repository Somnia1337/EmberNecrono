全局变量的生命周期为 `'static`，但无需用 `static` 声明。

## 编译期初始化

### 静态常量

```rust
const MAX: usize = usize::MAX / 2;

fn main() {
    println!("The allowed maximum is {}", MAX);
}
```

- 用 `const`，必须指明类型
- 可在任意作用域定义，贯穿程序的生命周期
- 赋值表达式必须可在编译期算出
- 不允许重复定义遮蔽

### 静态变量

```rust
static mut COUNT: usize = 0;

fn main() {
    unsafe {
        COUNT += 1;
    }
    add_one();
    unsafe {
        println!("Counts: {}", COUNT);
    }
}

fn add_one() {
    unsafe {
        COUNT += 1;
    }
}
```

- 用 `static mut`
- 必须在 `unsafe` 块中访问
- 类型必须实现 `Sync` trait

一般不使用静态变量，而使用原子类型：

```rust
use std::sync::atomic::{AtomicUsize, Ordering};

static REQUEST_RECV: AtomicUsize = AtomicUsize::new(0);

fn main() {
    for _ in 0..100 {
        REQUEST_RECV.fetch_add(1, Ordering::Relaxed);
    }
    println!("Counts: {:?}", REQUEST_RECV);
}
```