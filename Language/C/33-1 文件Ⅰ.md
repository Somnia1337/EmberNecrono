### 创建并写入文件

需要借助的函数（均已声明在stdio.h中）：

#### fopen：创建或打开文件

![[33-1-1.png|450]]

相对路径与绝对路径：

![[33-1-2.png|300]]

![[33-1-3.png|300]]

两种操作模式：读模式r、写模式w（==w模式会先将文件内容清空==）。

![[33-1-4.png|450]]

#### fprintf：输出字符串到文件

fprintf与printf原型相似，只是增加了一个文件结构指针参数。

![[33-1-6.png|450]]

fprintf与printf使用方法类似：

![[33-1-5.png|300]]

#### fclose：关闭文件

![[33-1-7.png|300]]

==先关闭所有资源再结束程序==是良好的编程习惯。

---

完整代码：

![[33-1-8.png|450]]

### 回车与换行

字车：打字机上用于打字的部件。

回车：==将字车移动到行首==。

换行：==将页面向上移动一行==。

沿用至今，回车为'\\r'，ASCII13；换行为'\\n'，ASCII10。

不同的系统在将光标移动到次行行首时使用不同的字符。

Windows：\\r \\n。

Linux：\\n，C语言也采用这种惯例。

在C中，写入、读取文件时，如果与惯例不一致，则会进行自动转换。

### 文本模式与二进制模式

文本模式：对文件输入输出的数据当作一行行的文本来处理

如果想采用二进制模式处理文件输入输出，可以在fopen函数的第二个参数里加上'b'（如"rb"、"wb"）

### 读取文件

#### fscanf：读取文件

fscanf与scanf原型相似，只是增加了一个文件结构指针参数。

![[33-1-9.png|450]]

fscanf与scanf使用方法类似：

![[33-1-10.png|300]]

![[33-1-11.png|450]]

在这里，第三个fscanf尝试读取一个字符时读到了'\\n'，可以使用函数fgetc吸收。

#### fgetc：读取字符

![[33-1-12.png|300]]

EOF（End Of File）：表示“文件结尾”，是在头文件stdio.h中定义的值为-1的宏。

![[33-1-13.png|450]]

#### fgets：读取字符串

![[33-1-16.png|450]]

用第二个参数防止数组越界：

![[33-1-17.png|450]]

返回值情形：

![[33-1-18.png|450]]

### 测试文件状态

#### feof：测试文件是否结尾

#### ferror：测试文件是否读写出错

![[33-1-14.png|450]]

![[33-1-15.png|450]]