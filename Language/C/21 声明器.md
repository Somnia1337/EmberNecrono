### 声名器

数组声明格式：*元素类型* *数组名*\[*元素个数*\]\[*元素个数*\]...。

指针声明格式：*目标类型* (\*)*数组名*\[*元素个数*\]\[*元素个数*\]...。

**声明器**：提供标识符与类型信息，用于声明一个标识符的语法。

```c
int* func(char* p, double d);
//将声明器中的标识符去除，就得到函数的类型
int* (char* , double);
```

### 优先级

```c
int*; //基础类型指针
int**; //指针的指针
int (*)[5]; //数组的指针
int* [5]; //指针组成的数组
```

为了区分后两种类型，需要加括号，这就涉及优先级问题。

**声明器中的优先级**
1. 括号()
2. 函数声明的括号() 与 数组声明的方括号\[\] （同优先级）
3. 指针声明的星号\*

**区别指针数组和数组指针**：

指针数组int* \[5\]：==先计算方括号\[\]--是数组==；再计算星号\*--元素类型为指针。

数组指针int (\*)\[5\]：==先计算括号()--内有星号\*--是指针==；再计算方括号\[\]--对象为数组。

实例：int* (\*id)\[4\]，先计算括号()--内有星号\*--是指针；再计算方括号\[\]--对象为数组；最后计算星号\*--元素类型为指针；所以，id为指针数组的指针。

![[21-1.png|450]]

### 函数指针

将`int *func(char* p, double d);`改为`int (*pfunc)(char* p, double d) = func;`。

分析标识符pfunc：首先计算第一对括号()--内有星号\*--是指针；再计算第二对括号()--内有函数参数--指针指向一个函数，==pfunc是一个函数指针==。

==函数名func出现在表达式中，将转换为该函数的指针==，所以用标识符func初始化函数指针pfunc。

对函数指针取值，就将其还原为函数，比如==(\*pfunc)可以替换func来使用==（注意需要加括号）。

由于历史原因，==单独一个标识符pfunc也可以替换func来使用==（即可以省略括号和星号）。

```c
void showStar()
{
	printf("***");
}
void showPlus()
{
	printf("+++");
}
void showMinus()
{
	printf("---");
}
void showAt()
{
	printf("@@@");
}
```

可以为这4个函数定义一个指针数组：

```c
void (*funcArr[4])() = { showStar, showPlus, showMinus, showAt };
```

最后再用循环遍历这4个函数：

![[21-2.png|450]]

也可以更简洁：

![[21-3.png|300]]

在示例中，函数指针的作用不明显，但在更加复杂的案例中（比如多个函数的调用顺序由用户输入的字符决定），利用函数指针就可以更加灵活。