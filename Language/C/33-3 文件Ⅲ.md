### 数值转为字符串写入

![[33-3-1.png|300]]

与整型的占用空间不同（如值1和值12345都占用4字节），转换为字符串后的数字每一个都要占用相同的空间，所以位数越多占用空间越多。

![[33-3-2.png|450]]

代码中的换行只有'\n'，但是文件中的换行却有两个字符，这是因为在Windows环境下使用文本模式，'\n'会自动被替换为'\r'+'\n'。

![[33-3-3.png|450]]

### 读取字符串转为数值

![[33-3-4.png|450]]

除了已知循环次数的读取，更多情况下并不知道具体有多少数据，可以用fscanf不断读取直到读取失败或读取至EOF。

![[33-3-5.png|450]]

填充就是指成功读取数据存入数组。

注意：如果目标数据量超过了预定的数组大小，将会导致数组越界。

可以在循环开始时先判断是否已经填充整个数组，如果是则结束循环。

### 数值以二进制形式写入

#### fwrite：以二进制形式写入文件

![[33-3-6.png|450]]

![[33-3-7.png|450]]

![[33-3-8.png|450]]

![[33-3-9.png|450]]

在写入数组中的元素10（本质为首个字节的十六进制为0A）时，由于将其当作ASCII时对应的字符为'\n'，又因为处于文本模式，所以会自动在前面添加'\r'。

![[33-3-10.png|300]]

若想不在0A前自动添加0D，将文件打开模式修改为"wb"，让文件以二进制模式打开，就不会进行换行符的转换。

### 读取二进制

#### fread：读取文件中的二进制数据

![[33-3-11.png|450]]

使用方法类似于fwrite，将文件打开模式修改为"r"。

对于未知数量的数据，也可以采用类似上文fscanf的循环读取。

![[33-3-12.png|450]]