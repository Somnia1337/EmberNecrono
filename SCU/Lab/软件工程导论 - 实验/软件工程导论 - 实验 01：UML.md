@2024.04.28 | Week 09

卢剑歌 2022141461145

> 以 **“音乐播放器”** 为例，用 UML 建模：
> 
> - 用例图
> - 时序图
> - 活动图
> - 类图

## 1 *用例图*

### 1.1 确定参与者

用户：音乐播放器工作过程的主要参与者，可以播放音乐、暂停音乐、控制上一首或下一首、管理播放列表、管理曲库。

### 1.2 确定用例

- 播放音乐：用户可以播放音乐。
- 暂停音乐：用户可以暂停音乐。
- 上一首 / 下一首：用户可以切歌。
- 管理播放列表：用户可以创建多个播放列表，对其进行命名、添加曲目、删除曲目、调整顺序。
- 管理曲库：用户可以管理整个曲库内的曲目，包括添加曲目、删除曲目、添加到播放列表。

### 1.3 用例规格说明

- 用例：播放音乐
- 参与者：用户
- 情景目标：用户选择播放列表并播放其中的音乐。
- 前提条件：软件和播放设备都正常工作。
- 启动：用户点击播放列表中的任意一首歌曲。
- 场景：
	1. 用户浏览所有播放列表
	2. 用户点击其中的一个播放列表。
	3. 用户浏览播放列表内的曲目。
	4. 用户点击其中的一个歌曲。
	5. 播放器开始以默认配置播放该播放列表。
	6. 用户在播放期间进行操作，包括暂停音乐、切歌、管理播放列表。
- 异常：
	- 无法打开播放列表中的某个音乐。
	- 用户选择的播放列表中没有音乐。
	- 播放期间，列表中的某个音乐被其他软件更改，导致播放失败。

### 1.4 绘制 *用例图*

![[Snipaste_240428_081457.png|400]]

<div style="page-break-after: always"></div>

## 2 *时序图*

### 2.1 场景分析

- 用户选择一个播放列表中的音乐。
- 用户开始播放音乐。
- 用户暂停播放音乐。
- 用户切换到上一首。
- 用户切换到下一首。
- 用户添加音乐到播放列表 / 从播放列表删除音乐。

### 2.2 绘制 *时序图*

![[Snipaste_240428_084259.png|600]]

<div style="page-break-after: always"></div>

## 3 *活动图*

### 3.1 活动分析

```rust
进入播放器控制界面
if 选择播放列表:
	if 选择音乐:
		while 播放音乐:
			match 动作:
				1 => 暂停音乐,
				2 => 上一首,
				3 => 下一首,
	else:
		管理播放列表
else:
	管理曲库
```

### 3.2 绘制 *活动图*

![[Snipaste_240428_090204.png|400]]

<div style="page-break-after: always"></div>

## 4 *类图*

### 4.1 识别分析类

| 潜在类    | 一般分类 |
| ------ | ---- |
| 用户     | 外部实体 |
| 音乐     | 事物   |
| 音乐播放器  | 事物   |
| 音乐属性   | 属性   |
| 播放音乐   | 事件   |
| 暂停音乐   | 事件   |
| 上一首    | 事件   |
| 下一首    | 事件   |
| 播放列表   | 事物   |
| 管理播放列表 | 事件   |
| 曲库     | 事物   |
| 管理曲库   | 事件   |

### 4.2 确定、描述合法类

| 类                   | 属性                                                          | 操作                                                              |
| ------------------- | ----------------------------------------------------------- | --------------------------------------------------------------- |
| **`Music` 音乐**      | `filePath` 文件路径<br>`title` 标题<br>`artist` 艺术家<br>`album` 专辑 | `getDuration()` 获取时间长度                                          |
| **`Player` 音乐播放器**  | `currentMusic` 当前音乐<br>`playlist` 播放列表                      | `play()` 播放音乐<br>`pause()` 暂停音乐<br>`next()` 下一首<br>`prev()` 上一首 |
| **`Playlist` 播放列表** | `musics` 音乐列表<br>`listName` 列表名                             | `addMusic` 添加音乐<br>`removeMusic` 删除音乐                           |
| **`MusicLib` 曲库**   | `musics` 音乐列表                                               | `addMusic` 添加音乐<br>`removeMusic` 删除音乐                           |

<div style="page-break-after: always"></div>

### 4.3 确定类间关系

- 1 `MusicLib` 对多 `Music`
- 多 `Playlist` 对多 `Music`
- 1 `Player` 对 1 `Music`
- 1 `Player` 对 1 `Playlist`

### 4.4 绘制 *类图*

![[Snipaste_240428_083038.png|600]]