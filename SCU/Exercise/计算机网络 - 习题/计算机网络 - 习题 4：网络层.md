### [数据平面](https://mooc1.chaoxing.com/mooc-ans/mooc2/work/dowork?courseId=240832925&classId=92306555&cpi=266037146&workId=34785749&answerId=53064920&standardEnc=9989231042d2a429dead9545934f103d&enc=ee8f7521a6e23551a814bab82fba5c06)

IP is responsible for **host-to-host** communication while TCP is responsible for **process-to-process** communication.

Consider a router with the switching fabric based on sharing memory. The memory access speed (read and write) is $B$ packets per second. The overall forwarding throughput is always **less than $\large \frac{B}{2}$ packets per second**.

The broadcast address of network `202.115.32.0/23` is **`202.115.33.255`**.

Which of the following sub-network masks is illegal? **`225.225.168.0`**

How many bits are there for an IPv6 address? **128**

An IP datagram of $2312$ bytes arrives at a router and must be forwarded to a link with an MTU of $1500$ bytes. Thus, the router has to fragment the datagram. To the last fragment, the value of offset should be **`185`**

How does the TTL changed by one each time the datagram is processed by a router? **decrease**

If all datagrams arriving at the router from WAN have the same destination IP address, then how does the router know the internal host to which it should forward a given datagram? The trick is to use **NAT translation** table at router, and include port numbers as well as IP address in the table entries.

The internet’s network layer provides a single service - that is **best-effort-service**.

In a **datagram** network, a series of packet may follow different paths and may arrive out of order.

There are three kinds of switch fabric for a router normally, those three switch fabrics do not include **packet switching**.

**Dual stack** means that IPv6 nodes also have a complete IPv4 implementation as well.

In the following four fields, which is in IPV6 header but not in IPV4? **flow label**

There are three kinds of switch fabric for a router normally. Which can send multiple packets across the fabric in parallel? **switching via an interconnection-network**

Among the following packet scheduling disciplines, which one ensures that all packets depart in the order in which they arrived? **FIFO**

**T** In IP, CRC is introduced for error detection.

**T** Every router implements the network layer.

**F** It is the network layer’s responsibility to forward packets reliably from the source to the destination.

1. Consider a subnet with prefix `101.101.101.64/26`. Give an example of one IP address (of from `xxx.xxx.xxx.xxx`) that can be assigned to this network. 
2. Suppose an ISP owns the block of addresses of the form `101.101.128/19`. Suppose it wants to create four subnets from this block, with each block having the same number of IP addresses. What are the prefixes (of form `a.b.c.d/x`) for the four subnets?

```text
1. example: 101.101.101.66

2. prefixes: 
101.101.128.0/21
101.101.136.0/21
101.101.144.0/21
101.101.152.0/21
```

Please give the maximum aggregate block of addresses for the following four blocks of addresses:

`212.56.132.0/24, 212.56.133.0/24, 212.56.134.0/24, 212.56.135.0/24`

```text
212.56.132.0/22
```

==T21.==

| Prefix Match           | Link Interface |
| ---------------------- | -------------- |
| `11100000 00`          | 0              |
| `11100000 01000000`    | 1              |
|  `11100000 01000001`   | 2              |
| `11100001 0`           | 2              |
| otherwise              | 3              |

<div style="page-break-after: always"></div>

Consider sending a $2400$-byte datagram into a link that has an MTU of $700$ bytes. Suppose the original datagram is stamped with the identification number `422`. How many fragments are generated? What are the values in the various fields in the IP datagram(s) generated related to fragmentation?

```text
how many:
4

various fields and values:
- length: 680 680 680 340
- offset:   0  85 170 255
- flag:     1   1   1   0
```

Consider a router that interconnects three subnets: Subnet 1, Subnet 2, and Subnet 3. Suppose all of the interfaces in each of these three subnets are required to have the prefix `223.1.17/24`. Also suppose that Subnet 1 is required to support at least 60 interfaces, Subnet 2 is to support at least 90 interfaces, and Subnet 3 is to support at least 12 interfaces. Provide three network addresses (of form `a.b.c.d/x`) that satisfy these constraints.

```text
sub1: 223.1.17.128/26 | 223.1.17.128 ~ 223.1.17.187
sub2: 223.1.17.0  /25 | 223.1.17.1   ~ 223.1.17.90
sub3: 223.1.17.192/26 | 223.1.17.193 ~ 223.1.17.204
```

==T24.==

| Match                                                            | Action       |
| ---------------------------------------------------------------- | ------------ |
| ingress port = `1`<br>IP Src = `10.3.*.*`<br>IP Dst = `10.1.*.*` | `forward(2)` |
| ingress port = `2`<br>IP Src = `10.1.*.*`<br>IP Dst = `10.3.*.*` | `forward(1)` |
| ingress port = `1` \| `2`<br>IP Dst = `10.2.0.3`                 | `forward(3)` |
| ingress port = `1` \| `2`<br>IP Dst = `10.2.0.4`                 | `forward(4)` |

### [4-2](https://mooc1.chaoxing.com/mooc-ans/mooc2/work/dowork?courseId=240832925&classId=92306555&cpi=266037146&workId=34973926&answerId=53092350&standardEnc=8804411c08fb108840d106fa722060b6&enc=740e3de039279a5906c2728e841e3835)

\#13

a)

A 的向量表：

| From\\To | A   | B   | C   | D   |
| -------- | --- | --- | --- | --- |
| A        | $0$ | $4$ | $3$ | $1$ |
| B        | $4$ | $0$ | $2$ | $4$ |
| C        | $3$ | $2$ | $0$ | $2$ |
| D        | $1$ | $4$ | $2$ | $0$ |

b)

D 原先的向量表：

| From\\To | A   | B   | C   | D   |
| -------- | --- | --- | --- | --- |
| A        | $0$ | $4$ | $3$ | $1$ |
| B        | $4$ | $0$ | $2$ | $4$ |
| C        | $3$ | $2$ | $0$ | $2$ |
| D        | $1$ | $4$ | $2$ | $0$ |

D 更新后的向量表：

| From\\To | A       | B   | C   | D   |
| -------- | ------- | --- | --- | --- |
| A        | $0$     | $4$ | $3$ | $1$ |
| B        | $4$     | $0$ | $2$ | $4$ |
| C        | $3$     | $2$ | $0$ | $2$ |
| D        | ==$5$== | $4$ | $2$ | $0$ |

D 发送给 C 的向量表：

| From\\To | A       | B   | C   | D   |
| -------- | ------- | --- | --- | --- |
| D        | ==$5$== | $4$ | $2$ | $0$ |

c)

C 原先的向量表：

| From\\To | A   | B   | C   | D   |
| -------- | --- | --- | --- | --- |
| A        | $0$ | $4$ | $3$ | $1$ |
| B        | $4$ | $0$ | $2$ | $4$ |
| C        | $3$ | $2$ | $0$ | $2$ |
| D        | $1$ | $4$ | $2$ | $0$ |

C 更新后的向量表：

| From\\To | A       | B   | C   | D   |
| -------- | ------- | --- | --- | --- |
| A        | $0$     | $4$ | $3$ | $1$ |
| B        | $4$     | $0$ | $2$ | $4$ |
| C        | ==$6$== | $2$ | $0$ | $2$ |
| D        | ==$5$== | $4$ | $2$ | $0$ |

C 发送给 D 的向量表：

| From\\To | A            | B   | C   | D   |
| -------- | ------------ | --- | --- | --- |
| C        | ==$\infty$== | $2$ | $0$ | $2$ |

d) 不是，因为所有节点都运行 DV，A 还运行 eBGP，而其余节点还运行 iBGP。

\#14

| Step | $N^\prime$ | $s$         | $t$         | $u$         | $v$        | $w$        | $y$        | $z$         |
| ---- | ---------- | ----------- | ----------- | ----------- | ---------- | ---------- | ---------- | ----------- |
| 1    | $x$        |             |             |             | $x, 8$     | ==$x, 6$== | $x, 6$     |             |
| 2    | $xw$       |             |             | $w, 14$     | $x, 8$     |            | ==$x, 6$== |             |
| 3    | $xwy$      |             | $y, 15$     | $w, 14$     | ==$y, 7$== |            |            | $y, 18$     |
| 4    | $xwyv$     |             | $v, 11$     | ==$v, 10$== |            |            |            | $y, 18$     |
| 5    | $xwyvu$    | $u, 14$     | ==$v, 11$== |             |            |            |            | $y, 18$     |
| 6    | $xwyvut$   | ==$t, 12$== |             |             |            |            |            | $t, 16$     |
| 7    | $xwyvuts$  |             |             |             |            |            |            | ==$t, 16$== |
| 8    | $xwyvutsz$ |             |             |             |            |            |            |             |

\#15

a)

| From\\To | A    | B    | C   | D   |
| -------- | ---- | ---- | --- | --- |
| C        | $13$ | $12$ | $0$ | $7$ |

b)

| Prefix  | Output Link |
| ------- | ----------- |
| `1.1.*` | `1`         |
| `1.2.*` | `2`         |
| `1.3.*` | `3`         |
| `1.4.*` | `2`         |
| `2.*`   | `1`         |
| `3.*`   | `2`         |
| `4.*`   | `2`         |

c)

| Prefix  | Output Link |
| ------- | ----------- |
| `1.1.*` | `1`         |
| `1.2.*` | `2`         |
| `1.3.*` | `3`         |
| `1.4.*` | `2`         |
| `2.*`   | `1`         |
| `3.*`   | `1`         |
| `4.*`   | `1`         |

\#16

a) eBGP

b) eBGP

c) eBGP

d) iBGP

\#17

a) `l1`，因为该接口开始从 `1d` 到网关路由器 `1c` 的最小成本路径

b) `l2`，两个路由都具有相等的 AS-PATH 长度，但 `l2` 一开始具有最近 NEXT-HOP 路由器的路径

c) `l1`，它一开始具有最短 AS-path 的路径

\#18

应在网络层进行，因为所有参与路由的节点都实现了网络层，而路由器不实现运输层。